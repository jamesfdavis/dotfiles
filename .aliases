# ------------------------------------------------------------------------------
# .aliases - Shell Aliases
# 
# Sections:
# 1. Navigation & Filesystem
# 2. Git
# 3. Claude Code
# 4. Cloudflare (Wrangler)
# 5. GitHub CLI
# 6. Python / UV
# 7. Development
# 8. System & Utilities
# ------------------------------------------------------------------------------

# ==============================================================================
# 1. NAVIGATION & FILESYSTEM
# ==============================================================================

# Better ls with eza (if installed)
if command -v eza &>/dev/null; then
    alias ls="eza"
    alias ll="eza -la --git"
    alias la="eza -a"
    alias lt="eza --tree --level=2"
    alias llt="eza -la --tree --level=2"
else
    alias ll="ls -lah"
    alias la="ls -a"
fi

# Navigation
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias ~="cd ~"
alias -- -="cd -"  # Go to previous directory

# Directory shortcuts
alias dl="cd ~/Downloads"
alias dt="cd ~/Desktop"
alias src="cd ~/src"
alias p="cd ~/projects"
alias dot="cd ~/dotfiles"

# Always ask before overwriting
alias cp="cp -i"
alias mv="mv -i"
alias rm="rm -i"

# Create directory and cd into it
mkcd() {
    mkdir -p "$1" && cd "$1"
}

# Better cat with syntax highlighting (if bat installed)
if command -v bat &>/dev/null; then
    alias cat="bat --paging=never"
    alias catp="bat"  # cat with pager
fi

# ==============================================================================
# 2. GIT
# ==============================================================================

# Core workflow
alias g="git"
alias gs="git status"
alias ga="git add"
alias gaa="git add --all"
alias gc="git commit"
alias gcm="git commit -m"
alias gca="git commit --amend"
alias gcan="git commit --amend --no-edit"  # Amend without editing message

# Branching
alias gb="git branch"
alias gba="git branch -a"
alias gbd="git branch -d"
alias gbD="git branch -D"
alias gco="git checkout"
alias gcob="git checkout -b"
alias gsw="git switch"
alias gswc="git switch -c"

# Push/Pull
alias gp="git push"
alias gpf="git push --force-with-lease"  # Safer force push
alias gpo="git push origin"
alias gpom="git push origin main"
alias gl="git pull"
alias gpr="git pull --rebase"

# Diff & Log
alias gd="git diff"
alias gds="git diff --staged"
alias glog="git log --oneline --graph --decorate -20"
alias gloga="git log --oneline --graph --decorate --all"
alias glogp="git log --pretty=format:'%C(yellow)%h%Creset %C(blue)%ad%Creset %C(green)%an%Creset %s' --date=short"

# Stash
alias gst="git stash"
alias gstp="git stash pop"
alias gstl="git stash list"
alias gstd="git stash drop"

# Misc
alias gf="git fetch"
alias gfa="git fetch --all"
alias grb="git rebase"
alias grbi="git rebase -i"
alias grba="git rebase --abort"
alias grbc="git rebase --continue"
alias grs="git reset"
alias grsh="git reset --hard"
alias gclean="git clean -fd"

# Show last commit
alias glast="git log -1 HEAD --stat"

# Uncommit (undo last commit, keep changes staged)
alias uncommit="git reset --soft HEAD~1"

# ==============================================================================
# 3. CLAUDE CODE
# ==============================================================================

alias cc="claude"
alias ccc="claude chat"
alias ccr="claude --resume"
alias cci="claude init"

# Claude with specific modes
alias ccv="claude --verbose"
alias ccd="claude --dangerously-skip-permissions"  # Use carefully!

# ==============================================================================
# 4. CLOUDFLARE (WRANGLER)
# ==============================================================================

alias wr="wrangler"
alias wrd="wrangler dev"
alias wrdl="wrangler dev --local"
alias wrp="wrangler deploy"
alias wrl="wrangler tail"
alias wrpub="wrangler deploy"

# D1 Database
alias wrd1="wrangler d1"

# KV
alias wrkv="wrangler kv"

# R2
alias wrr2="wrangler r2"

# Pages
alias wrpages="wrangler pages"

# Secrets
alias wrsec="wrangler secret"

# ==============================================================================
# 5. GITHUB CLI
# ==============================================================================

alias ghpr="gh pr create"
alias ghprl="gh pr list"
alias ghprv="gh pr view"
alias ghprw="gh pr view --web"
alias ghprc="gh pr checkout"
alias ghprm="gh pr merge"

alias ghis="gh issue create"
alias ghisl="gh issue list"
alias ghisv="gh issue view"

alias ghrl="gh release list"
alias ghrc="gh release create"

alias ghrepo="gh repo view --web"
alias ghbrowse="gh browse"

# ==============================================================================
# 6. PYTHON / UV
# ==============================================================================

alias py="python3"
alias python="python3"
alias pip="pip3"

# UV (fast Python package manager)
alias uvv="uv venv"               # Create virtual environment
alias uva="source .venv/bin/activate"  # Activate venv
alias uvd="deactivate"            # Deactivate venv
alias uvp="uv pip"
alias uvi="uv pip install"
alias uvir="uv pip install -r requirements.txt"
alias uvf="uv pip freeze"

# Jupyter
alias jn="jupyter notebook"
alias jl="jupyter lab"

# ==============================================================================
# 7. DEVELOPMENT
# ==============================================================================

# Node/NPM
alias ni="npm install"
alias nid="npm install --save-dev"
alias nr="npm run"
alias nrs="npm run start"
alias nrd="npm run dev"
alias nrb="npm run build"
alias nrt="npm run test"

# Code editor
alias c="code"
alias c.="code ."

# Ports & Processes
alias ports="lsof -i -P -n | grep LISTEN"
alias kill3000="lsof -ti:3000 | xargs kill -9"
alias kill8000="lsof -ti:8000 | xargs kill -9"
alias kill8787="lsof -ti:8787 | xargs kill -9"  # Wrangler default port

# ==============================================================================
# 8. SYSTEM & UTILITIES
# ==============================================================================

# IP addresses
alias ip="curl -s ifconfig.me"
alias localip="ipconfig getifaddr en0"

# Reload shell
alias reload="exec ${SHELL} -l"
alias rl="reload"

# Clear terminal
alias cls="clear"

# Homebrew
alias brewup="brew update && brew upgrade && brew cleanup"

# macOS specific
if [[ "$OSTYPE" == "darwin"* ]]; then
    # Show/hide hidden files in Finder
    alias showfiles="defaults write com.apple.finder AppleShowAllFiles -bool true && killall Finder"
    alias hidefiles="defaults write com.apple.finder AppleShowAllFiles -bool false && killall Finder"
    
    # Flush DNS
    alias flushdns="sudo dscacheutil -flushcache; sudo killall -HUP mDNSResponder"
    
    # Lock screen
    alias afk="/System/Library/CoreServices/Menu\ Extras/User.menu/Contents/Resources/CGSession -suspend"
    
    # Empty trash
    alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl"
    
    # Get macOS software updates
    alias update="sudo softwareupdate -i -a; brew update; brew upgrade; brew cleanup"
fi

# Quick editing
alias zshrc="code ~/.zshrc"
alias aliases="code ~/.aliases"
alias gitconfig="code ~/.gitconfig"

# HTTP server (Python)
alias serve="python3 -m http.server 8000"

# JSON pretty print
alias json="jq ."

# Grep with color
alias grep="grep --color=auto"

# Disk usage
alias du="du -h"
alias df="df -h"

# ==============================================================================
# WORK-SPECIFIC (if WORK_HOST is set in ~/.extra)
# ==============================================================================

if [ "$WORK_HOST" = "true" ]; then
    # Add work-specific aliases here
    :  # placeholder - add your work aliases below
fi
